#N canvas 102 37 1356 863 12;
#X declare -path .;
#X declare -path sounds;
#N canvas 0 23 588 274 LICENSE 0;
#X text 79 84 (c) 2008 Reality Jockey;
#X text 57 36 Released under the GNU General Public License ver. 3 or later. See the file LICENSE.txt for the full text.;
#X restore 37 11 pd LICENSE;
#X obj 14 59 declare -path .;
#X text 37 633 msp Granular Synthesis;
#N canvas 0 37 545 181 LOADBANGS 0;
#X obj 172 140 s gain;
#X msg 172 119 1;
#X msg 290 121 0;
#X obj 290 142 s mode;
#X text 322 116 start in Play mode;
#X text 322 127 not Freeze mode;
#X obj 154 14 loadbang;
#X obj 154 57 s loadbang;
#X obj 154 36 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 290 100 r loadbang;
#X obj 172 98 r loadbang;
#X obj 108 13 inlet;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 6 0 8 0;
#X connect 8 0 7 0;
#X connect 9 0 2 0;
#X connect 10 0 1 0;
#X connect 11 0 8 0;
#X restore 15 35 pd LOADBANGS;
#X obj 15 15 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 783 504 dac~, f 6;
#X text 156 46 load in sample #;
#X obj 15 85 declare -path sounds;
#N canvas 137 442 1333 486 INIT 0;
#X obj 663 380 send basepitch;
#X obj 321 370 send min;
#X obj 321 266 spigot;
#X obj 116 212 r mode;
#X obj 206 265 spigot;
#X obj 388 349 + 0.01;
#X obj 388 371 send maxi;
#X obj 710 55 delay 300;
#X floatatom 445 291 5 0 0 0 - - - 0;
#X obj 427 249 spigot;
#X obj 427 271 + 1;
#X obj 427 310 * 5;
#X msg 631 155 0;
#X obj 321 288 + 1;
#X obj 321 307 * 64;
#X obj 663 338 r ppr;
#X obj 206 371 send stretch;
#X floatatom 206 355 5 0 0 0 - - - 0;
#X obj 206 288 * 2;
#X obj 206 311 + 1;
#X obj 697 4 inlet;
#X obj 697 98 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 245 228 == 0;
#X obj 360 228 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 245 247 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 207 392 Play mode;
#X text 328 405 Freeze mode;
#X text 329 390 0-127;
#X text 325 419 Position + loop end in Slider_Adjuster;
#X text 100 196 Play/Freeze;
#X obj 466 228 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 710 33 r loadbang;
#X msg 328 167 1;
#X obj 788 370 send pitchrand;
#X obj 967 282 * 100;
#X obj 967 372 send pitchquant;
#X obj 1174 370 send duration;
#X msg 967 160 0;
#X msg 788 161 0;
#X floatatom 891 239 5 0 0 0 - - - 0;
#X floatatom 1103 243 5 0 0 0 - - - 0;
#X obj 1103 261 / 100;
#X obj 891 258 / 100;
#X obj 735 253 / 100;
#X obj 1174 297 * 250;
#X obj 788 290 * 127;
#X obj 735 230 r rpr;
#X obj 891 217 r qpr;
#X obj 1103 222 r dpr;
#X msg 1174 160 0.36;
#X connect 2 0 13 0;
#X connect 3 0 22 0;
#X connect 3 0 23 0;
#X connect 3 0 30 0;
#X connect 4 0 18 0;
#X connect 5 0 6 0;
#X connect 7 0 21 0;
#X connect 8 0 11 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 5 1;
#X connect 12 0 0 0;
#X connect 13 0 14 0;
#X connect 14 0 1 0;
#X connect 14 0 5 0;
#X connect 15 0 0 0;
#X connect 17 0 16 0;
#X connect 18 0 19 0;
#X connect 19 0 17 0;
#X connect 20 0 21 0;
#X connect 21 0 12 0;
#X connect 21 0 38 0;
#X connect 21 0 37 0;
#X connect 21 0 32 0;
#X connect 21 0 49 0;
#X connect 22 0 24 0;
#X connect 23 0 2 1;
#X connect 24 0 4 1;
#X connect 30 0 9 1;
#X connect 31 0 7 0;
#X connect 32 0 17 0;
#X connect 37 0 34 0;
#X connect 38 0 45 0;
#X connect 39 0 42 0;
#X connect 40 0 41 0;
#X connect 41 0 44 0;
#X connect 42 0 34 0;
#X connect 43 0 45 0;
#X connect 44 0 36 0;
#X connect 46 0 43 0;
#X connect 47 0 39 0;
#X connect 48 0 40 0;
#X connect 49 0 44 0;
#X restore 107 35 pd INIT;
#X text 36 651 Adam Parkinson / RJDJ iOS / 2010;
#X text 200 632 nobuyasu sakodna / MaxMSP / 1999;
#X text 155 22 CLICK to select;
#X floatatom 991 141 5 10 2000 0 - - - 0;
#X floatatom 1036 141 5 0 100 0 - - - 0;
#X text 1036 105 var %, f 4;
#X floatatom 898 263 5 0 0 0 - - - 0;
#X floatatom 1081 141 5 0 0 0 - - - 0;
#X floatatom 1126 141 5 0 1000 0 - - - 0;
#X text 1128 105 var %, f 4;
#X floatatom 998 263 5 0 0 0 - - - 0;
#X text 1077 105 transp (cts), f 6;
#X obj 748 220 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 900 141 5 10 2000 0 - - - 0;
#X floatatom 945 141 5 0 2500 0 - - - 0;
#X obj 770 289 pack 0 0 0, f 33;
#X obj 782 454 r play-cloud;
#X msg 657 723 \; play-cloud 0 1000 1000 -400;
#X msg 657 771 \; play-cloud 0 1000 500 -400;
#X msg 770 316 \; play-cloud 0 \$1 \$2 \$3;
#X text 655 700 instance \, position (ms) \, grandur \, transp;
#X text 36 559 Based on our port of Sakonda-san's MSP granular synth;
#X text 36 576 Combined with Cipriani & Giri's Gen~ cloud generator from their Vol. 3 book, f 77;
#X text 37 669 Atau Tanaka 2024;
#X text 36 540 Granular cloud CLONE generator;
#N canvas 63 100 673 285 viewer 0;
#X obj 238 65 inlet;
#X obj 259 242 outlet;
#X obj 238 89 t b f;
#X obj 238 113 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 238 137 pack;
#X msg 437 138 vis 2 0;
#X msg 437 164 vis 3 0;
#X msg 438 81 vis 0 0;
#X msg 438 107 vis 1 0;
#X msg 238 161 vis \$2 \$1;
#X msg 501 81 vis 4 0;
#X msg 501 107 vis 5 0;
#X msg 500 138 vis 6 0;
#X msg 500 164 vis 7 0;
#X msg 569 81 vis 8 0;
#X msg 569 107 vis 9 0;
#X msg 568 138 vis 10 0;
#X msg 568 164 vis 11 0;
#X obj 490 23 inlet;
#X obj 490 47 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 539 25 close all;
#X msg 70 95 vis 0 1;
#X msg 70 121 vis 1 1;
#X msg 69 152 vis 2 1;
#X msg 69 178 vis 3 1;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 1;
#X connect 3 0 4 0;
#X connect 4 0 9 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 1 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X connect 12 0 1 0;
#X connect 13 0 1 0;
#X connect 14 0 1 0;
#X connect 15 0 1 0;
#X connect 16 0 1 0;
#X connect 17 0 1 0;
#X connect 18 0 19 0;
#X connect 19 0 6 0;
#X connect 19 0 5 0;
#X connect 19 0 8 0;
#X connect 19 0 7 0;
#X connect 19 0 13 0;
#X connect 19 0 12 0;
#X connect 19 0 11 0;
#X connect 19 0 10 0;
#X connect 19 0 17 0;
#X connect 19 0 16 0;
#X connect 19 0 15 0;
#X connect 19 0 14 0;
#X connect 21 0 1 0;
#X connect 22 0 1 0;
#X connect 23 0 1 0;
#X connect 24 0 1 0;
#X restore 876 454 pd viewer;
#X obj 783 478 clone grain-clone-st~ 12;
#N canvas 412 61 724 700 old-stuff 0;
#X floatatom 75 589 8 0 0 0 - filterfreq - 0;
#X obj 78 554 hsl 128 15 0 1 0 1 filtercutoff empty filtercutoff 4 8 0 10 #fcfcfc #000000 #000000 12700 1;
#X floatatom 75 572 5 0 0 0 - - - 0;
#X obj 77 619 hsl 128 15 0 1 0 1 filterres empty filterres 4 8 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 74 637 5 0 0 0 - - - 0;
#X text 142 589 Hz;
#X obj 241 574 tgl 15 0 distoonoff empty disto_on/off 17 7 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 235 639 5 0 0 0 - - distodrive 0;
#X floatatom 235 596 5 0 0 0 - - - 0;
#X text 283 640 DISTORTION;
#N canvas 150 461 450 300 autoscale-init 0;
#X obj 64 47 inlet;
#X obj 64 151 outlet;
#X msg 201 76 input -1 1 \, 0;
#X obj 64 104 m_autoscale 0 100 dB;
#X obj 201 53 r loadbang;
#X connect 0 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X restore 235 617 pd autoscale-init;
#X text 120 637 Q;
#X obj 238 553 hsl 128 15 -1 1 0 0 empty distortion empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X text 77 491 ________________ FX SECTION ________________;
#X text 74 517 ________LPF________ ______OVERDRIVE_____;
#X obj 300 196 s rndm;
#X floatatom 300 136 4 0 0 0 - - - 0;
#X floatatom 431 166 10 0 0 0 - - - 0;
#N canvas 5 38 498 255 time_stretcher 0;
#X obj 270 158 r rndm;
#X obj 158 197 +~;
#X obj 158 218 throw~ control;
#N canvas 37 389 915 461 seq_engine 0;
#X obj 178 184 sel 0;
#X obj 220 422 outlet~;
#X obj 345 66 r sample_length;
#X obj 220 394 *~ 1000;
#X obj 178 162 * 1;
#X obj 218 274 phasor~;
#X obj 178 138 t b f;
#X obj 106 51 sel 0;
#X obj 106 26 inlet;
#X obj 210 209 t b f;
#X obj 218 254 /;
#X obj 138 76 t b f;
#X obj 138 120 /;
#X msg 138 98 1;
#X msg 216 231 1000;
#X obj 327 307 snapshot~;
#X floatatom 327 328 5 0 0 0 - - - 0;
#X obj 309 354 f;
#X obj 327 261 r mode;
#X obj 327 282 sel 1 0;
#X obj 264 122 r bangz;
#X msg 264 166 0;
#X obj 264 144 sel 1;
#X obj 433 249 inlet;
#X obj 451 305 r raw_length;
#X obj 433 338 /;
#X text 430 222 helps make sure sample starts;
#X text 430 232 at right place when switching modes;
#X text 295 166 reset to sample start;
#X text 314 241 Play/Freeze;
#X text 153 27 stretch factor;
#X text 173 98 reciprocal;
#X text 61 265 MASTER CLOCK;
#X text 60 277 FOR SAMPLE PLAYBACK;
#X connect 0 1 9 0;
#X connect 2 0 6 0;
#X connect 2 0 3 1;
#X connect 3 0 1 0;
#X connect 4 0 0 0;
#X connect 5 0 3 0;
#X connect 5 0 15 0;
#X connect 6 0 4 0;
#X connect 6 1 4 1;
#X connect 7 1 11 0;
#X connect 8 0 7 0;
#X connect 9 0 14 0;
#X connect 9 1 10 1;
#X connect 10 0 5 0;
#X connect 11 0 13 0;
#X connect 11 1 12 1;
#X connect 12 0 4 0;
#X connect 13 0 12 0;
#X connect 14 0 10 0;
#X connect 15 0 16 0;
#X connect 16 0 17 1;
#X connect 17 0 5 1;
#X connect 18 0 19 0;
#X connect 19 0 15 0;
#X connect 19 1 17 0;
#X connect 20 0 22 0;
#X connect 21 0 5 1;
#X connect 22 0 21 0;
#X connect 23 0 25 0;
#X connect 24 0 25 1;
#X connect 25 0 17 1;
#X restore 194 123 pd seq_engine;
#X floatatom 123 31 0 0 0 0 - - - 0;
#N canvas 378 62 450 300 switch 0;
#X obj 116 135 *~;
#X obj 121 181 +~;
#X obj 156 137 *~;
#X obj 135 27 inlet;
#X obj 128 78 < 1;
#X obj 123 249 outlet~;
#X obj 241 26 inlet~;
#X obj 180 26 inlet~;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 3 0 2 1;
#X connect 4 0 0 1;
#X connect 6 0 2 0;
#X connect 7 0 0 0;
#X restore 158 169 pd switch;
#X obj 136 145 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 136 124 r mode;
#X obj 122 4 r stretch;
#N canvas 58 80 262 182 pos_rndm 0;
#X obj 60 83 +~ 1;
#X obj 60 108 *~ 0;
#X obj 60 60 noise~;
#X obj 102 82 / 2;
#X obj 108 31 inlet;
#X obj 60 143 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 2 0 0 0;
#X connect 3 0 1 1;
#X connect 4 0 3 0;
#X restore 270 178 pd pos_rndm;
#X text 274 219 to Granvoice;
#X obj 314 25 inlet;
#X text 152 31 Stretch factor;
#X text 72 98 PLAY mode;
#X text 358 128 FREEZE position;
#X text 63 137 Play (0);
#X text 60 148 Freeze (1);
#X obj 313 126 line~;
#X msg 314 80 \$1 5;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 3 0 5 1;
#X connect 4 0 3 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 8 0 4 0;
#X connect 9 0 1 1;
#X connect 11 0 3 1;
#X connect 11 0 18 0;
#X connect 17 0 5 2;
#X connect 18 0 17 0;
#X restore 431 197 pd time_stretcher;
#X text 508 166 freeze position (ms);
#X obj 434 138 hsl 190 15 0 1 0 0 empty empty empty 20 8 0 8 #fcfcfc #000000 #000000 0 1;
#N canvas 53 236 693 556 slider_adjuster 0;
#X obj 130 450 * 1, f 6;
#X obj 28 305 inlet;
#X obj 129 503 outlet;
#X floatatom 173 165 6 0 0 0 - - - 0;
#X text 219 164 sample length;
#X obj 455 92 r mode;
#X text 473 32 Play/Freeze (0/1);
#X obj 133 57 r raw_length;
#X obj 454 123 sel 1;
#X text 514 122 Going into Freeze;
#X text 283 32 Sample position in Play;
#X text 514 134 captures position;
#X text 281 50 from "PD Granular";
#X obj 340 73 r trackpoint;
#X obj 341 136 /;
#X floatatom 364 121 5 0 0 0 - - - 0;
#X floatatom 339 99 5 0 0 0 - - - 0;
#X floatatom 346 160 5 0 0 0 - - - 0;
#X msg 435 272 set \$1;
#X obj 434 500 outlet;
#X obj 535 73 s-r mode;
#X obj 535 56 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 132 130 t b f;
#X obj 330 281 f;
#X text 25 282 slider (pos);
#X text 183 504 update pos (ms);
#X obj 129 377 / 1;
#X text 179 378 divide by 127 if MIDI;
#X obj 347 211 * 1;
#X text 488 501 update slider (0-1);
#X text 410 215 multiply by 127 if MIDI;
#X connect 0 0 2 0;
#X connect 1 0 26 0;
#X connect 3 0 0 1;
#X connect 5 0 8 0;
#X connect 7 0 22 0;
#X connect 7 0 15 0;
#X connect 8 0 23 0;
#X connect 13 0 16 0;
#X connect 14 0 17 0;
#X connect 15 0 14 1;
#X connect 16 0 14 0;
#X connect 17 0 28 0;
#X connect 18 0 19 0;
#X connect 20 0 21 0;
#X connect 21 0 20 0;
#X connect 22 0 26 0;
#X connect 22 1 3 0;
#X connect 23 0 26 0;
#X connect 26 0 0 0;
#X connect 28 0 18 0;
#X connect 28 0 23 1;
#X restore 431 107 pd slider_adjuster;
#X obj 162 148 s-r mode;
#X obj 162 130 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 163 175 0 0 0 0 - - - 0;
#X floatatom 67 318 5 0 0 0 - - - 0;
#X text 108 321 cents;
#X text 190 175 gran dur (ms);
#X obj 67 343 s-r basepitch;
#X obj 163 194 s-r duration;
#X floatatom 306 322 5 0 0 0 - - - 0;
#X obj 307 342 s-r stretch;
#X obj 309 304 hsl 128 15 -2 4 0 0 empty empty empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X text 368 287 |;
#X text 179 128 Play/Freeze;
#X obj 70 301 hsl 128 15 -1200 1200 0 0 empty empty empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 201 285 0;
#X text 129 284 |;
#X msg 440 288 1;
#X text 426 62 ______________SCRUB______________;
#X text 62 250 ________TRANSPOSE_________;
#X text 525 253 ______PITCH______;
#X text 305 249 _________STRETCH_________;
#X text 335 135 pos random;
#X text 560 198 --SEQ ENGINE HERE--;
#X text 162 59 ______________PLAYBACK__________________________;
#X obj 300 102 loadbang;
#X obj 300 167 + 5;
#X floatatom 667 153 5 0 0 0 - - - 0;
#X text 632 135 pos (0-1);
#X obj 431 83 r scrub;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 8 0 10 0;
#X connect 10 0 7 0;
#X connect 12 0 8 0;
#X connect 16 0 47 0;
#X connect 17 0 18 0;
#X connect 20 0 21 0;
#X connect 20 0 48 0;
#X connect 21 0 17 0;
#X connect 21 1 20 0;
#X connect 22 0 23 0;
#X connect 23 0 22 0;
#X connect 24 0 29 0;
#X connect 25 0 28 0;
#X connect 28 0 35 0;
#X connect 29 0 24 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 30 0;
#X connect 35 0 25 0;
#X connect 36 0 35 0;
#X connect 38 0 32 0;
#X connect 46 0 16 0;
#X connect 47 0 15 0;
#X connect 50 0 21 0;
#X restore 318 105 pd old-stuff;
#X text 962 456 upon overflow \, pass play message to next instance, f 18;
#N canvas 0 22 450 300 (subpatch) 0;
#X array doublebuf 220500 float 0;
#X coords 0 1 220499 -1 200 140 1 0 0;
#X restore 21 325 graph;
#X text 227 377 220500 samples = 5 sec @ 44.1Khz, f 17;
#X text 227 429 Each half = 2.5 sec, f 13;
#X obj 20 260 tabwrite~ doublebuf;
#X obj 164 261 tabwrite~ doublebuf;
#X obj 76 201 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 164 201 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 43 227 start first recording, f 17;
#X obj 21 174 adc~ 1;
#N canvas 92 129 457 491 play-buffer 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array playobject 391688 float 0;
#X coords 0 1 391687 -1 200 140 1;
#X restore 55 337 graph;
#N canvas 489 150 957 483 sampleloader 0;
#X obj 803 174 s raw_length;
#X obj 721 168 r rndm;
#X obj 690 258 s sample_length;
#X obj 696 69 soundfiler;
#X obj 690 226 -;
#X obj 722 190 t b f;
#X obj 663 165 f;
#X msg 696 38 read -resize mouse.wav playobject;
#X obj 627 36 r sfiler;
#X obj 298 46 inlet;
#X obj 636 344 list split 2;
#X obj 676 372 list split 1;
#X msg 676 398 set \$1;
#X obj 676 424 outlet;
#X obj 636 317 r sfiler;
#X obj 297 111 select 0 1 2 3 4 5;
#X obj 291 310 s sfiler;
#X floatatom 297 88 5 0 0 0 - - - 0;
#X text 175 90 load in sample #;
#X obj 210 45 r loadbang;
#X obj 696 102 sampstoms;
#X msg 296 142 read -resize 01.wav playobject;
#X msg 316 174 read -resize 02.wav playobject;
#X msg 339 208 read -resize 03.wav playobject;
#X msg 358 240 read -resize 04.wav playobject;
#X msg 379 273 read -resize 05.wav playobject;
#X msg 210 69 2;
#X connect 1 0 5 0;
#X connect 3 0 20 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 5 1 4 1;
#X connect 6 0 4 0;
#X connect 7 0 3 0;
#X connect 8 0 3 0;
#X connect 9 0 17 0;
#X connect 10 1 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 14 0 10 0;
#X connect 15 0 21 0;
#X connect 15 1 22 0;
#X connect 15 2 23 0;
#X connect 15 3 24 0;
#X connect 15 4 25 0;
#X connect 17 0 15 0;
#X connect 19 0 26 0;
#X connect 20 0 6 1;
#X connect 20 0 0 0;
#X connect 20 0 4 0;
#X connect 21 0 16 0;
#X connect 22 0 16 0;
#X connect 23 0 16 0;
#X connect 24 0 16 0;
#X connect 25 0 16 0;
#X connect 26 0 17 0;
#X restore 146 316 pd sampleloader;
#X floatatom 147 291 5 0 0 0 - - - 0;
#X msg 147 269 0;
#X msg 178 269 1;
#X msg 212 269 2;
#X msg 243 269 3;
#X msg 274 269 4;
#X obj 269 308 change;
#X obj 269 332 s samp;
#X obj 59 198 tabplay~ playobject;
#X obj 59 109 unpack;
#X obj 98 139 *;
#X obj 158 50 samplerate~;
#X floatatom 158 74 9 0 0 0 - - - 0;
#X obj 158 26 loadbang;
#X obj 59 166 pack;
#X obj 158 97 / 1000;
#X obj 59 28 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 59 55 metro 8800;
#X msg 59 82 0 8800;
#X text 239 132 placeholder play buffer instead of live input, f 27;
#X obj 59 230 outlet~;
#X connect 2 0 1 0;
#X connect 2 0 8 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 2 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 9 0;
#X connect 10 0 22 0;
#X connect 11 0 16 0;
#X connect 11 1 12 0;
#X connect 12 0 16 1;
#X connect 13 0 14 0;
#X connect 14 0 17 0;
#X connect 15 0 13 0;
#X connect 15 0 18 0;
#X connect 16 0 10 0;
#X connect 17 0 12 1;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 11 0;
#X restore 361 168 pd play-buffer;
#N canvas 12 298 868 492 cv-map 0;
#X text 525 296 map Bela CV input to parameters;
#X obj 492 96 r CV0;
#X obj 422 96 r button1;
#N canvas 3 520 450 396 led3 0;
#X floatatom 43 85 5 0 0 0 - - - 0;
#X obj 43 134 i;
#X floatatom 43 213 5 0 0 0 - - - 0;
#X obj 43 108 - 0.5;
#X obj 43 187 + 1;
#X msg 44 276 1;
#X obj 44 300 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 76 276 0;
#X obj 44 251 sel 1;
#X msg 109 275 1;
#X obj 109 299 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 141 275 0;
#X msg 175 274 1;
#X obj 175 298 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 207 274 0;
#X obj 109 250 sel 2;
#X obj 175 249 sel 3;
#X obj 43 31 inlet;
#X obj 44 329 outlet;
#X obj 109 329 outlet;
#X obj 175 329 outlet;
#X obj 43 61 map 1 3;
#X obj 43 160 change;
#X connect 0 0 3 0;
#X connect 1 0 22 0;
#X connect 2 0 8 0;
#X connect 2 0 15 0;
#X connect 2 0 16 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 18 0;
#X connect 7 0 6 0;
#X connect 8 0 5 0;
#X connect 8 1 7 0;
#X connect 9 0 10 0;
#X connect 10 0 19 0;
#X connect 11 0 10 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 13 0;
#X connect 15 0 9 0;
#X connect 15 1 11 0;
#X connect 16 0 12 0;
#X connect 16 1 14 0;
#X connect 17 0 21 0;
#X connect 21 0 0 0;
#X connect 22 0 4 0;
#X restore 474 198 pd led3;
#X obj 422 144 sel 1;
#N canvas 82 285 471 457 led2 0;
#X floatatom 43 85 5 0 0 0 - - - 0;
#X obj 43 134 i;
#X floatatom 43 216 5 0 0 0 - - - 0;
#X obj 43 108 - 0.5;
#X obj 43 190 + 1;
#X msg 50 303 1;
#X obj 66 342 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 82 303 0;
#X msg 115 302 1;
#X obj 131 341 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 147 302 0;
#X obj 43 31 inlet;
#X obj 66 371 outlet;
#X obj 131 371 outlet;
#X obj 43 61 map 1 3;
#X obj 44 254 sel 1 2 3, f 17;
#X obj 43 163 change;
#X connect 0 0 3 0;
#X connect 1 0 16 0;
#X connect 2 0 15 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 12 0;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 9 0 13 0;
#X connect 10 0 9 0;
#X connect 11 0 14 0;
#X connect 14 0 0 0;
#X connect 15 0 5 0;
#X connect 15 0 10 0;
#X connect 15 1 5 0;
#X connect 15 1 8 0;
#X connect 15 2 8 0;
#X connect 15 2 7 0;
#X connect 16 0 4 0;
#X restore 493 256 pd led2;
#N canvas 3 520 450 396 led3 0;
#X floatatom 43 85 5 0 0 0 - - - 0;
#X obj 43 134 i;
#X floatatom 43 213 5 0 0 0 - - - 0;
#X obj 43 108 - 0.5;
#X obj 43 187 + 1;
#X msg 44 276 1;
#X obj 44 300 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 76 276 0;
#X obj 44 251 sel 1;
#X msg 109 275 1;
#X obj 109 299 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 141 275 0;
#X msg 175 274 1;
#X obj 175 298 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 207 274 0;
#X obj 109 250 sel 2;
#X obj 175 249 sel 3;
#X obj 43 31 inlet;
#X obj 44 329 outlet;
#X obj 109 329 outlet;
#X obj 175 329 outlet;
#X obj 43 61 map 1 3;
#X obj 43 160 change;
#X connect 0 0 3 0;
#X connect 1 0 22 0;
#X connect 2 0 8 0;
#X connect 2 0 15 0;
#X connect 2 0 16 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 18 0;
#X connect 7 0 6 0;
#X connect 8 0 5 0;
#X connect 8 1 7 0;
#X connect 9 0 10 0;
#X connect 10 0 19 0;
#X connect 11 0 10 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 13 0;
#X connect 15 0 9 0;
#X connect 15 1 11 0;
#X connect 16 0 12 0;
#X connect 16 1 14 0;
#X connect 17 0 21 0;
#X connect 21 0 0 0;
#X connect 22 0 4 0;
#X restore 566 198 pd led3;
#X obj 451 221 led-bargraph, f 30;
#X obj 473 145 map 0 20;
#X obj 473 170 s density;
#X msg 422 168 0;
#X obj 614 121 map 500 10;
#X obj 614 145 s metro;
#X obj 24 271 r button2;
#X obj 422 120 change;
#X obj 614 75 r CV1;
#X obj 130 268 r button4;
#X obj 556 258 r button3;
#X obj 23 100 initialise_digitals;
#X text 22 62 Initialise LEDs \, buttons and trigger inputs, f 25;
#N canvas 421 209 746 660 CV-inputs 0;
#X obj 187 131 lop~ 1;
#X obj 187 106 adc~ 3;
#X obj 187 155 snapshot~;
#X obj 261 131 lop~ 1;
#X obj 261 154 snapshot~;
#X obj 261 106 adc~ 4;
#X obj 79 250 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 79 199 loadbang;
#X msg 79 226 1;
#X text 57 131 avoid zipper noise;
#X obj 185 256 lop~ 1;
#X obj 185 280 snapshot~;
#X obj 259 256 lop~ 1;
#X obj 259 279 snapshot~;
#X obj 185 231 adc~ 5;
#X obj 259 231 adc~ 6;
#X obj 187 385 lop~ 1;
#X obj 187 409 snapshot~;
#X obj 261 385 lop~ 1;
#X obj 261 408 snapshot~;
#X obj 185 516 lop~ 1;
#X obj 185 540 snapshot~;
#X obj 259 516 lop~ 1;
#X obj 259 539 snapshot~;
#X obj 187 360 adc~ 7;
#X obj 261 360 adc~ 8;
#X obj 185 491 adc~ 9;
#X obj 259 491 adc~ 10;
#X text 15 107 analog input (range 0-1);
#X text 184 74 BELA KNOBS and CV;
#X obj 79 274 metro 100;
#X obj 139 56 inlet;
#X obj 187 202 s CV0;
#X obj 261 202 s CV1;
#X obj 186 329 s CV2;
#X obj 260 329 s CV3;
#X obj 188 458 s CV4;
#X obj 262 458 s CV5;
#X obj 186 589 s CV6;
#X obj 260 589 s CV7;
#X obj 408 56 inlet;
#X obj 408 91 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 408 139 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 408 115 flip 1;
#X text 368 27 debug mode on shuts off CV inputs;
#X obj 187 179 spigot 1;
#X obj 261 179 spigot 1;
#X obj 259 304 spigot 1;
#X obj 185 304 spigot 1;
#X obj 187 433 spigot 1;
#X obj 261 433 spigot 1;
#X obj 185 564 spigot 1;
#X obj 259 564 spigot 1;
#X obj 519 82 loadbang;
#X msg 519 106 0;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 45 0;
#X connect 3 0 4 0;
#X connect 4 0 46 0;
#X connect 5 0 3 0;
#X connect 6 0 30 0;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 10 0 11 0;
#X connect 11 0 48 0;
#X connect 12 0 13 0;
#X connect 13 0 47 0;
#X connect 14 0 10 0;
#X connect 15 0 12 0;
#X connect 16 0 17 0;
#X connect 17 0 49 0;
#X connect 18 0 19 0;
#X connect 19 0 50 0;
#X connect 20 0 21 0;
#X connect 21 0 51 0;
#X connect 22 0 23 0;
#X connect 23 0 52 0;
#X connect 24 0 16 0;
#X connect 25 0 18 0;
#X connect 26 0 20 0;
#X connect 27 0 22 0;
#X connect 30 0 2 0;
#X connect 30 0 4 0;
#X connect 30 0 11 0;
#X connect 30 0 13 0;
#X connect 30 0 17 0;
#X connect 30 0 19 0;
#X connect 30 0 21 0;
#X connect 30 0 23 0;
#X connect 31 0 30 1;
#X connect 40 0 41 0;
#X connect 41 0 43 0;
#X connect 42 0 45 1;
#X connect 42 0 46 1;
#X connect 42 0 47 1;
#X connect 42 0 48 1;
#X connect 42 0 49 1;
#X connect 42 0 50 1;
#X connect 42 0 51 1;
#X connect 42 0 52 1;
#X connect 43 0 42 0;
#X connect 45 0 32 0;
#X connect 46 0 33 0;
#X connect 47 0 35 0;
#X connect 48 0 34 0;
#X connect 49 0 36 0;
#X connect 50 0 37 0;
#X connect 51 0 38 0;
#X connect 52 0 39 0;
#X connect 53 0 54 0;
#X connect 54 0 41 0;
#X restore 23 178 pd CV-inputs;
#X obj 23 127 loadbang;
#X text 55 152 ms CV sampling;
#X obj 24 210 buttons, f 15;
#N canvas 411 448 589 172 button-sends 0;
#X obj 49 80 print Button 1:;
#X obj 161 80 print Button 2:;
#X obj 277 80 print Button 3:;
#X obj 389 79 print Button 4:;
#X obj 49 50 inlet;
#X obj 161 49 inlet;
#X obj 277 49 inlet;
#X obj 389 48 inlet;
#X obj 49 108 s button1;
#X obj 161 108 s button2;
#X obj 277 109 s button3;
#X obj 389 109 s button4;
#X connect 4 0 0 0;
#X connect 4 0 8 0;
#X connect 5 0 1 0;
#X connect 5 0 9 0;
#X connect 6 0 2 0;
#X connect 6 0 10 0;
#X connect 7 0 3 0;
#X connect 7 0 11 0;
#X restore 24 238 pd button-sends;
#X obj 214 159 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 236 159 DEBUG;
#X msg 23 152 20;
#X text 138 179 click to operate patch manually, f 19;
#X obj 215 19 inlet;
#X obj 412 395 map 0 100;
#X obj 608 395 map 0 100;
#X obj 606 369 r CV5;
#X obj 524 395 map 10 2000;
#X obj 791 369 r CV7;
#X obj 682 395 map -1200 1200;
#X obj 334 371 r CV2;
#X obj 412 371 r CV3;
#X obj 524 371 r CV4;
#X obj 682 371 r CV6;
#X obj 334 395 map 1 2500;
#X obj 334 419 s pos;
#X obj 412 419 s posvar;
#X obj 524 419 s dur;
#X obj 608 419 s durvar;
#X obj 682 419 s transp;
#X obj 792 397 map 0 100;
#X obj 792 421 s transpvar;
#X connect 1 0 3 0;
#X connect 1 0 8 0;
#X connect 2 0 14 0;
#X connect 3 0 7 1;
#X connect 3 1 7 2;
#X connect 3 2 7 3;
#X connect 4 0 10 0;
#X connect 6 0 7 5;
#X connect 6 1 7 6;
#X connect 6 2 7 7;
#X connect 8 0 9 0;
#X connect 10 0 9 0;
#X connect 11 0 12 0;
#X connect 14 0 4 0;
#X connect 14 0 7 0;
#X connect 15 0 6 0;
#X connect 15 0 11 0;
#X connect 21 0 27 0;
#X connect 23 0 24 0;
#X connect 23 1 24 1;
#X connect 23 2 24 2;
#X connect 23 3 24 3;
#X connect 25 0 20 1;
#X connect 27 0 20 0;
#X connect 29 0 25 0;
#X connect 30 0 42 0;
#X connect 31 0 44 0;
#X connect 32 0 31 0;
#X connect 33 0 43 0;
#X connect 34 0 46 0;
#X connect 35 0 45 0;
#X connect 36 0 40 0;
#X connect 37 0 30 0;
#X connect 38 0 33 0;
#X connect 39 0 35 0;
#X connect 40 0 41 0;
#X connect 46 0 47 0;
#X restore 318 80 pd cv-map;
#X obj 361 193 output~;
#X text 710 451 GRAIN CLOUD ENGINE, f 9;
#X text 115 322 | | | | | | | | | |, f 2;
#X obj 318 56 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 227 325 Buffer contains two copies of 2500ms, f 20;
#X obj 318 12 loadbang;
#X msg 318 34 1;
#N canvas 8 299 1049 372 parameters 0;
#X obj 314 125 outlet;
#X obj 371 125 outlet;
#X obj 454 125 outlet;
#X obj 510 125 outlet;
#X obj 589 125 outlet;
#X obj 668 125 outlet;
#X obj 121 100 s-r stretch;
#X obj 121 125 outlet;
#X obj 121 74 inlet;
#X text 35 43 Play (0);
#X text 34 54 Freeze (1);
#X obj 45 100 s-r freeze;
#X obj 45 74 inlet;
#X obj 45 125 outlet;
#N canvas 426 458 545 352 parameter-monitor 0;
#X text 90 10 monitor parameters in Bela IDE console;
#X obj 106 85 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 106 134 t b b b b b, f 30;
#X obj 106 236 i;
#X obj 156 236 i;
#X obj 106 309 print;
#X obj 106 261 pack 0 0 0 0 0, f 30;
#X obj 209 236 i;
#X obj 261 236 i;
#X obj 314 236 i;
#X obj 106 108 metro 500;
#X obj 106 60 inlet;
#X obj 39 164 r density;
#X obj 111 164 r metro;
#X obj 111 188 t b i;
#X obj 126 211 +;
#X obj 174 165 r pos;
#X obj 227 165 r dur;
#X obj 274 165 r transp;
#X obj 343 167 r stretch;
#X msg 106 285 dens-metro \$1 pos \$2 dur \$3 transp \$4 stretch \$5;
#X connect 1 0 10 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 2 2 7 0;
#X connect 2 3 8 0;
#X connect 2 4 9 0;
#X connect 3 0 6 0;
#X connect 4 0 6 1;
#X connect 6 0 20 0;
#X connect 7 0 6 2;
#X connect 8 0 6 3;
#X connect 9 0 6 4;
#X connect 10 0 2 0;
#X connect 11 0 1 0;
#X connect 12 0 15 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 14 1 15 1;
#X connect 15 0 3 1;
#X connect 16 0 4 1;
#X connect 17 0 7 1;
#X connect 18 0 8 1;
#X connect 19 0 9 1;
#X connect 20 0 5 0;
#X restore 885 211 pd parameter-monitor;
#X f 21;
#X obj 885 189 tgl 19 1 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 782 194 print to Bela console, f 12;
#X obj 314 100 s-r pos;
#X obj 371 100 s-r posvar;
#X obj 314 74 inlet;
#X obj 371 74 inlet;
#X obj 454 100 s-r dur;
#X obj 510 100 s-r durvar;
#X obj 454 74 inlet;
#X obj 510 74 inlet;
#X obj 589 100 s-r transp;
#X obj 668 100 s-r transpvar;
#X obj 589 74 inlet;
#X obj 668 74 inlet;
#X obj 768 100 s-r pitchquant;
#X obj 208 125 outlet;
#X obj 208 74 inlet;
#X obj 768 125 outlet;
#X obj 768 74 inlet;
#X obj 208 100 s-r stretchvar;
#X obj 860 294 outlet;
#X obj 886 73 inlet;
#X msg 860 266 set \$1;
#X obj 898 155 r loadbang;
#X connect 6 0 7 0;
#X connect 8 0 6 0;
#X connect 11 0 13 0;
#X connect 12 0 11 0;
#X connect 15 0 14 0;
#X connect 15 0 37 0;
#X connect 17 0 0 0;
#X connect 18 0 1 0;
#X connect 19 0 17 0;
#X connect 20 0 18 0;
#X connect 21 0 2 0;
#X connect 22 0 3 0;
#X connect 23 0 21 0;
#X connect 24 0 22 0;
#X connect 25 0 4 0;
#X connect 26 0 5 0;
#X connect 27 0 25 0;
#X connect 28 0 26 0;
#X connect 29 0 32 0;
#X connect 31 0 34 0;
#X connect 33 0 29 0;
#X connect 34 0 30 0;
#X connect 36 0 15 0;
#X connect 37 0 35 0;
#X connect 38 0 15 0;
#X restore 765 163 pd parameters;
#X f 65;
#X text 37 596 granular engine plays one grain at a time at density \, overflowing to next available grain when busy \, uses clone object to instantiate grains, f 77;
#X msg 750 600 \; density 0 \; metro 20 \; dur 80 \; transp 0 \; posvar 10 \;;
#X floatatom 855 141 5 0 0 0 - - - 0;
#X floatatom 1171 141 5 0 0 0 - - - 0;
#X text 359 255 temporary buffer play and dry output to delete, f 18;
#N canvas 45 436 678 310 triangle-window 0;
#X text 445 103 window shape;
#X obj 20 26 loadbang;
#X obj 20 85 soundfiler;
#N canvas 179 217 450 300 (subpatch) 0;
#X array wndw 512 float 0;
#X coords 0 1 511 -1 200 140 1 0 0;
#X restore 399 126 graph;
#X obj 21 122 s trisize;
#X msg 20 55 read -resize tri wndw;
#X connect 1 0 5 0;
#X connect 2 0 4 0;
#X connect 5 0 2 0;
#X restore 21 469 pd triangle-window;
#X floatatom 810 141 5 0 0 0 - - - 0;
#X obj 765 141 tgl 19 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X text 803 105 time stretch, f 7;
#N canvas 10 415 592 393 stretchfreeze 0;
#X floatatom 265 213 5 0 0 0 - - - 0;
#X floatatom 141 167 4 0 0 0 - - - 0;
#N canvas 40 91 1052 750 timestretch 0;
#X obj 110 28 inlet;
#X obj 110 55 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 110 518 5 0 0 0 - - - 0;
#X obj 110 491 +;
#X obj 133 619 select 0 1;
#X obj 126 657 i;
#X obj 199 28 r metro;
#X floatatom 199 55 5 0 0 0 - - - 0;
#X obj 133 595 >= 2500;
#X obj 166 424 i;
#X obj 166 448 * -1;
#X obj 110 85 t b b b;
#X obj 110 696 outlet;
#X floatatom 740 371 5 0 0 0 - - - 0;
#X text 194 583 foldover at half buffer, f 15;
#X text 201 430 reset to zero, f 7;
#X obj 110 541 t f f f;
#X obj 110 366 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 110 415 5 0 0 0 - - - 0;
#X obj 166 472 clip 0;
#X obj 271 344 *;
#X obj 271 28 inlet;
#X floatatom 271 55 5 0 0 0 - - - 0;
#X obj 271 320 t b f;
#X text 315 27 timestretch amount;
#X floatatom 303 344 5 0 0 0 - - - 0;
#X obj 271 296 clip 0 10;
#N canvas 640 435 499 370 posvar 0;
#X floatatom 244 93 5 0 0 0 - - - 0;
#X floatatom 304 93 5 0 100 0 - - - 0;
#X obj 102 134 random 1000;
#X obj 102 159 / 1000;
#X obj 102 93 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 286 196 *;
#X obj 243 254 +;
#X floatatom 243 278 5 0 0 0 - - - 0;
#X obj 286 220 t b f;
#X obj 244 49 inlet;
#X obj 305 49 inlet;
#X obj 102 49 inlet;
#X text 103 23 generate output;
#X obj 243 301 outlet;
#X text 246 23 value;
#X text 302 23 random var (absolute);
#X connect 0 0 6 0;
#X connect 1 0 5 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 2 0;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 13 0;
#X connect 8 0 6 0;
#X connect 8 1 6 1;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 11 0 4 0;
#X restore 110 391 pd posvar;
#X floatatom 271 368 5 0 0 0 - - - 0;
#X obj 739 28 inlet;
#X text 785 27 posvar (ms);
#X obj 461 107 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 461 131 random 200;
#X obj 461 154 - 100;
#X obj 461 177 moses 0;
#X floatatom 353 223 5 0 0 0 - - - 0;
#X floatatom 528 55 5 0 0 0 - - - 0;
#X obj 507 201 m_scale 0 100 1 4;
#X obj 353 201 m_scale -100 0 0.25 1;
#X text 551 152 positive 1-100 becomes stretch var 1 to 4 max or 0.25 to 1 min, f 24;
#X obj 271 273 * 1;
#X obj 528 28 inlet;
#X obj 528 77 * 2;
#X text 571 27 stretch var (0-100);
#X obj 353 246 t b f;
#X connect 0 0 1 0;
#X connect 1 0 11 0;
#X connect 2 0 16 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 4 1 9 0;
#X connect 5 0 3 1;
#X connect 6 0 7 0;
#X connect 7 0 9 1;
#X connect 7 0 19 2;
#X connect 7 0 20 0;
#X connect 8 0 4 0;
#X connect 9 0 10 0;
#X connect 10 0 19 0;
#X connect 11 0 17 0;
#X connect 11 1 31 0;
#X connect 13 0 27 2;
#X connect 16 0 12 0;
#X connect 16 1 8 0;
#X connect 16 2 5 1;
#X connect 17 0 27 0;
#X connect 18 0 3 0;
#X connect 19 0 3 1;
#X connect 20 0 28 0;
#X connect 21 0 22 0;
#X connect 22 0 40 0;
#X connect 23 0 20 0;
#X connect 23 1 20 1;
#X connect 23 1 25 0;
#X connect 26 0 23 0;
#X connect 27 0 18 0;
#X connect 28 0 27 1;
#X connect 29 0 13 0;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 38 0;
#X connect 34 1 37 0;
#X connect 35 0 44 0;
#X connect 36 0 42 0;
#X connect 36 0 33 1;
#X connect 37 0 35 0;
#X connect 38 0 35 0;
#X connect 40 0 26 0;
#X connect 41 0 36 0;
#X connect 42 0 32 1;
#X connect 44 0 40 0;
#X connect 44 1 40 1;
#X restore 110 190 pd timestretch;
#N canvas 378 62 327 284 switch 0;
#X obj 135 27 inlet;
#X obj 135 78 < 1;
#X obj 116 135 *;
#X obj 156 135 *;
#X obj 156 161 t b f;
#X obj 189 27 inlet;
#X obj 241 27 inlet;
#X obj 116 206 +;
#X obj 116 249 outlet;
#X connect 0 0 1 0;
#X connect 0 0 3 1;
#X connect 1 0 2 1;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 4 1 7 1;
#X connect 5 0 2 0;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X restore 80 282 pd switch;
#X floatatom 80 306 5 0 0 0 - - - 0;
#X floatatom 110 213 5 0 0 0 - - - 0;
#X text 142 32 time stretch;
#N canvas 237 274 499 370 frzpos 0;
#X floatatom 244 93 5 0 0 0 - - - 0;
#X floatatom 304 93 5 0 100 0 - - - 0;
#X obj 102 134 random 1000;
#X obj 102 159 / 1000;
#X obj 102 93 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 286 196 *;
#X obj 243 254 +;
#X floatatom 243 278 5 0 0 0 - - - 0;
#X obj 286 220 t b f;
#X obj 244 49 inlet;
#X obj 305 49 inlet;
#X obj 102 49 inlet;
#X text 103 23 generate output;
#X obj 243 301 outlet;
#X text 246 23 value;
#X text 302 23 random var (absolute);
#X connect 0 0 6 0;
#X connect 1 0 5 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 2 0;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 7 0 13 0;
#X connect 8 0 6 0;
#X connect 8 1 6 1;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 11 0 4 0;
#X restore 265 190 pd frzpos;
#X obj 28 54 inlet;
#X obj 27 171 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 295 162 5 0 0 0 - - - 0;
#X floatatom 435 172 5 0 0 0 - - - 0;
#X text 435 34 position var (ms);
#X text 296 32 position (ms);
#X obj 80 329 outlet;
#X text 155 283 switch between 'freeze' mode (position+var) and 'play' mode (timestretch+var), f 31;
#X obj 82 55 r freeze;
#X obj 141 82 r stretch;
#X obj 296 54 r pos;
#X obj 435 54 r posvar;
#X floatatom 173 167 4 0 0 0 - - - 0;
#X obj 174 110 r stretchvar;
#X text 184 57 stretch var;
#X connect 0 0 3 2;
#X connect 1 0 2 1;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 14 0;
#X connect 5 0 3 1;
#X connect 7 0 0 0;
#X connect 8 0 9 0;
#X connect 9 0 2 0;
#X connect 9 0 7 0;
#X connect 10 0 7 1;
#X connect 11 0 7 2;
#X connect 11 0 2 3;
#X connect 16 0 3 0;
#X connect 17 0 1 0;
#X connect 18 0 10 0;
#X connect 19 0 11 0;
#X connect 20 0 2 2;
#X connect 21 0 20 0;
#X restore 770 239 pd stretchfreeze;
#X floatatom 770 263 5 0 0 0 - - - 0;
#X text 746 105 play/ freeze, f 6;
#X msg 657 601 \; density 0 \; metro 100 \; dur 200 \; transp 0 \; posvar 0 \;;
#N canvas 52 341 272 174 grain-dur 0;
#X floatatom 72 97 5 0 0 0 - - - 0;
#X obj 72 57 variator;
#X obj 41 17 inlet;
#X obj 89 17 r dur;
#X obj 133 18 r durvar;
#X obj 72 120 outlet;
#X connect 0 0 5 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 1 1;
#X connect 4 0 1 2;
#X restore 898 239 pd grain-dur;
#N canvas 42 142 749 602 transposer 0;
#X obj 59 81 variator;
#X obj 59 36 inlet;
#X obj 110 35 r transp;
#X obj 175 35 r transpvar;
#X obj 56 565 outlet;
#X floatatom 79 357 5 0 0 0 - - - 0;
#X obj 79 380 / 100;
#X obj 79 407 i;
#X floatatom 79 431 5 0 0 0 - - - 0;
#X obj 79 454 * 100;
#X floatatom 56 494 5 0 0 0 - - - 0;
#X floatatom 267 81 5 0 0 0 - - - 0;
#X obj 267 122 route 0;
#X obj 118 160 loadbang;
#X msg 216 205 2;
#X msg 216 184 bang;
#X msg 183 205 1;
#X obj 184 160 sel 0;
#N canvas 192 270 548 310 switch 0;
#X obj 41 187 spigot;
#X obj 132 188 spigot;
#X obj 240 187 spigot;
#X obj 361 187 spigot;
#X obj 44 19 inlet;
#X obj 78 106 i 1;
#X obj 400 105 i 1;
#X obj 278 106 i 1;
#X obj 169 105 i 1;
#X obj 247 6 inlet;
#X obj 89 136 i 0;
#X obj 180 135 i 0;
#X obj 289 136 i 0;
#X obj 411 135 i 0;
#X obj 45 236 outlet;
#X obj 133 232 outlet;
#X obj 240 233 outlet;
#X obj 361 236 outlet;
#X obj 247 56 select 1 2 3 4;
#X connect 0 0 14 0;
#X connect 1 0 15 0;
#X connect 2 0 16 0;
#X connect 3 0 17 0;
#X connect 4 0 0 0;
#X connect 4 0 1 0;
#X connect 4 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 0 1;
#X connect 6 0 3 1;
#X connect 7 0 2 1;
#X connect 8 0 1 1;
#X connect 9 0 18 0;
#X connect 10 0 0 1;
#X connect 11 0 1 1;
#X connect 12 0 2 1;
#X connect 13 0 3 1;
#X connect 18 0 5 0;
#X connect 18 0 11 0;
#X connect 18 0 12 0;
#X connect 18 0 13 0;
#X connect 18 1 8 0;
#X connect 18 1 10 0;
#X connect 18 1 12 0;
#X connect 18 1 13 0;
#X connect 18 2 7 0;
#X connect 18 2 10 0;
#X connect 18 2 11 0;
#X connect 18 2 13 0;
#X connect 18 3 6 0;
#X connect 18 3 10 0;
#X connect 18 3 11 0;
#X connect 18 3 12 0;
#X restore 59 224 pd switch;
#X floatatom 59 122 5 0 0 0 - - - 0;
#X text 102 121 transposition;
#X obj 267 35 r pitchquant;
#X obj 313 185 / 10;
#X obj 313 209 i;
#X floatatom 313 233 5 0 0 0 - - - 0;
#X text 308 80 quantize amount cents;
#X obj 313 160 * 10;
#X text 354 184 quantize to 10 cent increments;
#X text 357 232 quantize grid (200 = whole step \, 700 = P5);
#X connect 0 0 19 0;
#X connect 1 0 0 0;
#X connect 2 0 0 1;
#X connect 3 0 0 2;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 11 0 12 0;
#X connect 11 0 17 0;
#X connect 12 1 26 0;
#X connect 13 0 16 0;
#X connect 14 0 18 1;
#X connect 15 0 14 0;
#X connect 16 0 18 1;
#X connect 17 0 16 0;
#X connect 17 1 15 0;
#X connect 18 0 10 0;
#X connect 18 1 5 0;
#X connect 19 0 18 0;
#X connect 21 0 11 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 6 1;
#X connect 24 0 9 1;
#X connect 26 0 22 0;
#X restore 998 239 pd transposer;
#X text 347 56 Play patch manually;
#X floatatom 686 141 5 10 2000 0 - - - 0;
#N canvas 282 292 497 468 cloud-generator 0;
#X obj 223 131 outlet;
#X text 47 74 Play (0);
#X text 46 85 Freeze (1);
#X obj 57 105 inlet;
#X obj 57 156 outlet;
#X obj 223 105 inlet;
#X obj 57 131 s-r density;
#X floatatom 57 286 5 0 0 0 - - - 0;
#X obj 57 310 density-generator;
#X obj 222 286 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 222 310 metro 500;
#X msg 102 286 0;
#X obj 57 235 r density;
#X obj 222 235 r metro;
#X text 141 14 stochastic density/sec;
#X text 141 29 or machine gun metro;
#X text 142 45 or both;
#X obj 57 259 change;
#X obj 223 156 s-r metro;
#X obj 246 387 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 383 406 outlet;
#X obj 410 105 inlet;
#X obj 222 259 route 0;
#X connect 3 0 6 0;
#X connect 5 0 18 0;
#X connect 6 0 4 0;
#X connect 7 0 8 0;
#X connect 8 0 19 0;
#X connect 9 0 10 0;
#X connect 10 0 19 0;
#X connect 11 0 7 0;
#X connect 12 0 17 0;
#X connect 13 0 22 0;
#X connect 17 0 7 0;
#X connect 18 0 0 0;
#X connect 19 0 20 0;
#X connect 22 0 9 0;
#X connect 22 1 9 0;
#X connect 22 1 10 1;
#X restore 625 163 pd cloud-generator;
#X floatatom 625 141 3 0 0 0 - - - 0;
#X floatatom 876 430 5 0 11 0 - - - 0;
#X obj 935 430 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 877 399 open 0-11, f 5;
#X text 931 399 close all, f 6;
#N canvas 498 535 450 300 overflow 0;
#X obj 78 50 list split 1;
#X obj 78 77 + 1;
#X obj 78 104 list;
#X text 123 74 upon overflow \, pass play message to next instance, f 30;
#X obj 78 21 inlet;
#X obj 78 131 route 12;
#X obj 130 178 outlet;
#X obj 204 181 outlet;
#X text 77 207 next instance trigger msg, f 15;
#X text 203 207 overflow all instances, f 14;
#X connect 0 0 1 0;
#X connect 0 1 2 1;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 4 0 0 0;
#X connect 5 0 7 0;
#X connect 5 1 6 0;
#X restore 948 504 pd overflow;
#X obj 1022 528 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 1044 520 overflow all instances, f 13;
#N canvas 92 129 427 246 alternator 0;
#X obj 35 43 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 98 48 10 0 0 0 - - - 0;
#X obj 35 67 metro 2500;
#X obj 35 91 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 35 115 select 0 1;
#X obj 35 139 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 68 139 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 35 19 loadbang;
#X text 131 77 5 sec buffer \, with two recordings starting half a buffer apart, f 33;
#X text 127 145 trigger rec - first half \, second half;
#X obj 35 176 outlet;
#X obj 86 176 outlet;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 5 0 10 0;
#X connect 6 0 11 0;
#X connect 7 0 0 0;
#X restore 76 175 pd alternator;
#X text 172 227 start second recording half buffer in, f 22;
#X text 1166 105 pitchquant (cents), f 10;
#X text 938 105 posvar (ms), f 6;
#X text 860 105 var %, f 3;
#X text 992 91 gran dur (ms), f 4;
#X text 974 589 piano hits;
#X obj 1217 141 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 1238 138 Bela IDE monitor, f 8;
#X text 613 105 density (Hz), f 7;
#X text 683 105 metro (ms), f 5;
#X text 897 105 pos (ms), f 5;
#X msg 1006 609 \; density 0 \; metro 50 \; freeze 0 \; stretch 0.5 \; stretchvar 0 \; pos 0 \; posvar 0 \; dur 80 \; durvar 0 \; transp 0 \; transpvar 0 \; pitchquant 0 \;;
#X msg 1129 606 \; density 40 \; metro 0 \; freeze 0 \; stretch 0.8 \; stretchvar 50 \; pos 0 \; posvar 4 \; dur 80 \; durvar 50 \; transp 10 \; transpvar 100 \; pitchquant 0 \;;
#X connect 4 0 3 0;
#X connect 12 0 56 5;
#X connect 13 0 56 6;
#X connect 15 0 24 1;
#X connect 16 0 56 7;
#X connect 17 0 56 8;
#X connect 19 0 24 2;
#X connect 21 0 66 0;
#X connect 21 0 70 0;
#X connect 21 0 71 0;
#X connect 22 0 56 3;
#X connect 23 0 56 4;
#X connect 24 0 28 0;
#X connect 25 0 35 0;
#X connect 34 0 35 0;
#X connect 35 0 5 0;
#X connect 35 1 5 1;
#X connect 35 2 80 0;
#X connect 43 0 41 0;
#X connect 44 0 42 0;
#X connect 46 0 41 0;
#X connect 46 0 42 0;
#X connect 46 0 49 0;
#X connect 46 0 49 1;
#X connect 52 0 48 0;
#X connect 54 0 55 0;
#X connect 55 0 52 0;
#X connect 56 0 64 0;
#X connect 56 1 63 0;
#X connect 56 2 59 0;
#X connect 56 3 22 0;
#X connect 56 4 23 0;
#X connect 56 5 12 0;
#X connect 56 6 13 0;
#X connect 56 7 16 0;
#X connect 56 8 17 0;
#X connect 56 9 60 0;
#X connect 56 10 90 0;
#X connect 59 0 56 2;
#X connect 60 0 56 9;
#X connect 63 0 56 1;
#X connect 64 0 56 0;
#X connect 66 0 67 0;
#X connect 67 0 24 0;
#X connect 70 0 15 0;
#X connect 71 0 19 0;
#X connect 73 0 74 1;
#X connect 74 0 75 0;
#X connect 74 1 73 0;
#X connect 74 2 21 0;
#X connect 75 0 74 0;
#X connect 76 0 34 0;
#X connect 77 0 34 1;
#X connect 80 0 35 0;
#X connect 80 1 81 0;
#X connect 83 0 43 0;
#X connect 83 1 44 0;
#X connect 90 0 56 10;
